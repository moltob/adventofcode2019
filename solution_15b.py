RAW_MAP = [
    ' ### ### ############# # ########### ### ',
    '#   #   #             # #           #   #',
    '# # # # ### ######### # # ### ##### ### #',
    '# #   #   #   #     # # # #   #         #',
    '# ####### ### # ##### # # # ########### #',
    '# #           #       # # #       #   # #',
    '# ### ######### ####### # ####### # # # #',
    '#   # #       # #               # # #   #',
    ' ## ### ##### # # ########### ### # #### ',
    '#   #   #   # # #   #   #     #   # #   #',
    '# ### ### # # # ##### # # ##### ### ### #',
    '#   #   # # # #   #   # #   #   #       #',
    '# # ### ### # ### # ### ##### ########## ',
    '# #   # #   # #   # # #       #   #     #',
    ' #### # # ### # ### # ### ##### # # ### #',
    '#     # #   # #     #   # #   # #     # #',
    '# ##### # # # ####### # # # # # ####### #',
    '# #     # # #   #     #   # #   #       #',
    '# # ####### ### ########### ##### ###### ',
    '# # #     #   # #           #   # #     #',
    '# # # # # # # # # ##### ##### ### # ### #',
    '# # # # #   # # # #   #   #     # # #   #',
    '# # ### ##### # # # ##### ##### # # # ## ',
    '# #   #     # #   # #   # #     # # #   #',
    '# ### # ### ##### # # ### # # ### ##### #',
    '#     # #   #   # # #       # #   #     #',
    '# ##### # ### # ### ########### ### #### ',
    '#   #   #   # #     #           #       #',
    ' ## ### ### # ####### ########### ##### #',
    '# #   # #   #         #   #     # #     #',
    '# ### ### # ########### ### # ### # ### #',
    '# #   #   # #   #     # #   #     # #   #',
    '# # ### ### # # # ### # # ######### # ## ',
    '#   #   # #   # # #   # # #      O# #   #',
    '# ### ### ##### # # ### # ### # ### ### #',
    '# #   #       #   # #         # #   # # #',
    '# ### # ### ####### ######### ### ### # #',
    '# #   # # #       #   #     # #   #     #',
    '# # ### # ####### ### # ### ### ### #### ',
    '#   #           #       #       #       #',
    ' ### ########### ####### ####### ####### ',
]

MAP = [list(row) for row in RAW_MAP]

WIDTH = 41
HEIGHT = 41

assert len(MAP) == HEIGHT
assert all(len(row) == WIDTH for row in MAP)


def find_start():
    for y in range(HEIGHT):
        try:
            return MAP[y].index('O'), y
        except ValueError:
            pass


def print_map():
    print('-----------------------------------------------')
    for y in range(HEIGHT):
        print(''.join(MAP[y]))


def fill(pos):
    print_map()

    duration = 0

    for delta_pos in ((-1, 0), (1, 0), (0, -1), (0, 1)):
        x = pos[0] + delta_pos[0]
        y = pos[1] + delta_pos[1]

        if 0 <= x < WIDTH and 0 <= y < HEIGHT:
            row = MAP[y]
            if row[x] == ' ':
                row[x] = 'O'
                duration = max(duration, 1 + fill((x, y,)))

    return duration


def main():
    start = find_start()
    print(start)
    print('Duration to fill', fill(start))


if __name__ == '__main__':
    main()
